plugins {
    id 'com.android.application'
    id 'kotlin-android'
    id 'dev.flutter.flutter-gradle-plugin'
}

def localProperties = new Properties()
def localPropertiesFile = rootProject.file('local.properties')
if (localPropertiesFile.exists())
    localPropertiesFile.withReader('UTF-8') { reader -> localProperties.load(reader)}
def flutterVersionCode = localProperties.getProperty('flutter.versionCode') ?: '1'
def flutterVersionName = localProperties.getProperty('flutter.versionName') ?: '1.0'

android {
    namespace 'ir.mahdiparastesh.fortuna.flutter'
    compileSdkVersion 34
    buildToolsVersion = '34.0.0'

    defaultConfig {
        applicationId 'ir.mahdiparastesh.fortuna.flutter'
        minSdkVersion 26
        targetSdkVersion 34
        versionCode flutterVersionCode.toInteger()
        versionName flutterVersionName
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_20
        targetCompatibility JavaVersion.VERSION_20
    }
    kotlinOptions { jvmTarget = '20' }
    sourceSets { main.java.srcDirs += 'src/main/kotlin' }

    buildTypes {
        release {
            minifyEnabled true
            signingConfig signingConfigs.debug
        }
    }
}

flutter { source '../..' }
dependencies {}
